<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeatForge AI - Professional Digital Audio Workstation</title>
    <meta name="description" content="Advanced DAW with AI session assistant, frequency analysis, and intelligent arrangement tools">
    <style>
        /* Complete CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --text-muted: #6b6b6b;
            --border-color: #333333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loading-content {
            text-align: center;
        }

        .waveform-bars {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
            height: 60px;
            margin-bottom: 2rem;
        }

        .waveform-bars .bar {
            width: 6px;
            background: linear-gradient(to top, var(--accent-primary), var(--accent-secondary));
            border-radius: 3px;
            animation: wave 1.2s ease-in-out infinite;
        }

        .waveform-bars .bar:nth-child(1) { animation-delay: 0s; height: 20px; }
        .waveform-bars .bar:nth-child(2) { animation-delay: 0.1s; height: 35px; }
        .waveform-bars .bar:nth-child(3) { animation-delay: 0.2s; height: 50px; }
        .waveform-bars .bar:nth-child(4) { animation-delay: 0.3s; height: 35px; }
        .waveform-bars .bar:nth-child(5) { animation-delay: 0.4s; height: 20px; }

        @keyframes wave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }

        .loading-content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .loading-content p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .daw-interface {
            display: none;
            min-height: 100vh;
            background: var(--bg-primary);
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .top-nav {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .main-nav {
            display: flex;
            gap: 0.5rem;
        }

        .nav-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .nav-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .transport-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem;
            border: 1px solid var(--border-color);
        }

        .transport-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .transport-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .transport-btn:hover {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            transform: scale(1.05);
        }

        .transport-btn.playing {
            background: var(--accent-success);
            border-color: var(--accent-success);
        }

        .transport-btn.record-btn.recording {
            background: var(--accent-danger);
            border-color: var(--accent-danger);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .time-display {
            text-align: center;
            margin-bottom: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            color: var(--text-primary);
        }

        .separator {
            color: var(--text-muted);
            margin: 0 0.5rem;
        }

        .playback-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-item label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .info-item select {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .tempo-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tempo-control label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .tempo-control input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            width: 60px;
        }

        .ai-assistant-toggle {
            background: var(--accent-secondary);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .ai-assistant-toggle:hover {
            background: var(--accent-primary);
        }

        /* Section Styles */
        .section-content {
            display: none;
            padding: 1rem;
        }

        .section-content.active {
            display: block;
        }

        /* Session View */
        .session-view {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem;
            border: 1px solid var(--border-color);
        }

        .tracks-container {
            margin-bottom: 1rem;
        }

        .track {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--border-color);
        }

        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .track-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .track-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .track-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .track-controls {
            display: flex;
            gap: 0.5rem;
        }

        .track-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            width: 30px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .track-btn:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .track-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .track-timeline {
            background: var(--bg-primary);
            height: 60px;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .track-clips {
            display: flex;
            align-items: center;
            height: 100%;
            padding: 0.5rem;
            gap: 0.5rem;
        }

        .clip {
            background: var(--accent-primary);
            height: 40px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            font-weight: 500;
            padding: 0 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clip:hover {
            background: var(--accent-secondary);
            transform: translateY(-2px);
        }

        /* AI Assistant */
        .ai-assistant-panel {
            background: var(--bg-secondary);
            border-radius: 12px;
            margin: 1rem;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .ai-header {
            background: var(--bg-tertiary);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .ai-header h3 {
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .ai-controls {
            display: flex;
            gap: 0.5rem;
        }

        .ai-analyze-btn {
            background: var(--accent-primary);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .ai-analyze-btn:hover {
            background: var(--accent-secondary);
        }

        .ai-content {
            padding: 1.5rem;
        }

        .ai-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .ai-tab {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
            font-size: 0.9rem;
        }

        .ai-tab:hover {
            color: var(--text-primary);
        }

        .ai-tab.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .frequency-meters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .freq-meter {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .meter-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .meter-bar {
            height: 40px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .meter-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            transition: height 0.3s ease;
        }

        .meter-fill.green { background: var(--accent-success); }
        .meter-fill.yellow { background: var(--accent-warning); }
        .meter-fill.red { background: var(--accent-danger); }

        .suggestion-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .suggestion-item {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .suggestion-type {
            font-weight: 600;
            color: var(--accent-primary);
        }

        .suggestion-desc {
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .apply-btn {
            background: var(--accent-primary);
            border: none;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .apply-btn:hover {
            background: var(--accent-secondary);
        }

        /* Mixer View */
        .mixer-view {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem;
            border: 1px solid var(--border-color);
        }

        .mixer-channels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .channel {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .channel-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .vu-meter {
            height: 100px;
            background: var(--bg-primary);
            border-radius: 4px;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }

        .vu-meter-left,
        .vu-meter-right {
            position: absolute;
            bottom: 0;
            width: 50%;
            height: 0%;
            transition: height 0.1s ease;
        }

        .vu-meter-left {
            left: 0;
            background: linear-gradient(to top, var(--accent-success), var(--accent-warning), var(--accent-danger));
        }

        .vu-meter-right {
            right: 0;
            background: linear-gradient(to top, var(--accent-success), var(--accent-warning), var(--accent-danger));
        }

        .volume-fader {
            margin-bottom: 1rem;
        }

        .fader {
            width: 100%;
            height: 4px;
            background: var(--bg-primary);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }

        .fader::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .fader::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .channel-controls {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .channel-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            width: 25px;
            height: 25px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.7rem;
        }

        .channel-btn:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .channel-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        /* Plugins View */
        .plugins-view {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem;
            border: 1px solid var(--border-color);
        }

        .plugins-rack {
            display: grid;
            gap: 1rem;
        }

        .plugin-slot {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid var(--border-color);
        }

        .plugin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .plugin-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .plugin-toggle {
            background: var(--accent-primary);
            border: none;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .plugin-toggle:hover {
            background: var(--accent-secondary);
        }

        .plugin-toggle.bypassed {
            background: var(--text-muted);
        }

        .plugin-controls {
            display: grid;
            gap: 0.75rem;
        }

        .control-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .control-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .control-slider {
            width: 120px;
            height: 4px;
            background: var(--bg-primary);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .control-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            background: var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .control-value {
            font-size: 0.8rem;
            color: var(--text-primary);
            min-width: 40px;
            text-align: right;
        }

        /* Export View */
        .export-view {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem;
            border: 1px solid var(--border-color);
        }

        .export-options {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .export-group {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid var(--border-color);
        }

        .export-group h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .format-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.5rem;
        }

        .format-option {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
        }

        .format-option:hover {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .format-option.selected {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .export-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .export-btn {
            background: var(--accent-success);
            border: none;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .export-btn:hover {
            background: var(--accent-primary);
        }

        .cancel-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.75rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .cancel-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .top-nav {
                padding: 1rem;
            }
            .nav-left {
                flex-direction: column;
                gap: 1rem;
            }
            .transport-controls {
                gap: 0.5rem;
            }
            .transport-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            .time-display {
                font-size: 1rem;
            }
            .playback-info {
                flex-direction: column;
                gap: 1rem;
            }
            .frequency-meters {
                grid-template-columns: 1fr;
            }
            .mixer-channels {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
            .format-options {
                grid-template-columns: 1fr 1fr;
            }
            .export-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="waveform-bars">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
            <h1>BeatForge AI</h1>
            <p>Initializing Audio Engine...</p>
        </div>
    </div>

    <!-- Main DAW Interface -->
    <div id="daw-interface" class="daw-interface">
        <header class="top-nav">
            <div class="nav-left">
                <div class="logo">
                    <div class="logo-icon">üéµ</div>
                    <h1>BeatForge AI</h1>
                </div>
                <nav class="main-nav">
                    <button class="nav-btn active" data-section="session">Session</button>
                    <button class="nav-btn" data-section="ai">AI Assistant</button>
                    <button class="nav-btn" data-section="mixer">Mixer</button>
                    <button class="nav-btn" data-section="plugins">Plugins</button>
                    <button class="nav-btn" data-section="export">Export</button>
                </nav>
            </div>
            <div class="nav-right">
                <div class="tempo-control">
                    <label>BPM</label>
                    <input type="number" id="bpm-input" value="120" min="60" max="200">
                </div>
                <button class="ai-assistant-toggle" id="ai-toggle">
                    <span class="ai-icon">ü§ñ</span>
                    <span>AI Assistant</span>
                </button>
            </div>
        </header>

        <!-- Transport Controls -->
        <section class="transport-section">
            <div class="transport-controls">
                <button class="transport-btn" id="rewind-btn">‚èÆÔ∏è</button>
                <button class="transport-btn" id="play-btn">‚ñ∂Ô∏è</button>
                <button class="transport-btn" id="stop-btn">‚èπÔ∏è</button>
                <button class="transport-btn record-btn" id="record-btn">‚è∫Ô∏è</button>
                <button class="transport-btn" id="loop-btn">üîÅ</button>
            </div>
            <div class="time-display">
                <span id="current-time">00:00:00.000</span>
                <span class="separator">/</span>
                <span id="total-time">00:03:45.000</span>
            </div>
            <div class="playback-info">
                <div class="info-item">
                    <label>Key</label>
                    <select id="key-select">
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="G">G</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                    </select>
                </div>
                <div class="info-item">
                    <label>Time Sig</label>
                    <select id="time-sig">
                        <option value="4/4">4/4</option>
                        <option value="3/4">3/4</option>
                        <option value="6/8">6/8</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Session View -->
        <section class="session-view section-content active" id="session-section">
            <h3 style="margin-bottom: 1rem; color: var(--text-primary);">üéµ Session Tracks</h3>
            <div class="tracks-container">
                <div class="track">
                    <div class="track-header">
                        <div class="track-info">
                            <div class="track-color" style="background: #ef4444;"></div>
                            <div class="track-name">Drums</div>
                        </div>
                        <div class="track-controls">
                            <button class="track-btn">M</button>
                            <button class="track-btn">S</button>
                            <button class="track-btn">R</button>
                        </div>
                    </div>
                    <div class="track-timeline">
                        <div class="track-clips">
                            <div class="clip">Kick Pattern</div>
                            <div class="clip">Snare Pattern</div>
                            <div class="clip">Hi-Hats</div>
                        </div>
                    </div>
                </div>
                <div class="track">
                    <div class="track-header">
                        <div class="track-info">
                            <div class="track-color" style="background: #f59e0b;"></div>
                            <div class="track-name">Bass</div>
                        </div>
                        <div class="track-controls">
                            <button class="track-btn">M</button>
                            <button class="track-btn">S</button>
                            <button class="track-btn">R</button>
                        </div>
                    </div>
                    <div class="track-timeline">
                        <div class="track-clips">
                            <div class="clip">Bassline</div>
                            <div class="clip">Sub Bass</div>
                        </div>
                    </div>
                </div>
                <div class="track">
                    <div class="track-header">
                        <div class="track-info">
                            <div class="track-color" style="background: #10b981;"></div>
                            <div class="track-name">Synth Lead</div>
                        </div>
                        <div class="track-controls">
                            <button class="track-btn">M</button>
                            <button class="track-btn">S</button>
                            <button class="track-btn">R</button>
                        </div>
                    </div>
                    <div class="track-timeline">
                        <div class="track-clips">
                            <div class="clip">Main Melody</div>
                            <div class="clip">Arpeggio</div>
                        </div>
                    </div>
                </div>
                <div class="track">
                    <div class="track-header">
                        <div class="track-info">
                            <div class="track-color" style="background: #3b82f6;"></div>
                            <div class="track-name">Vocals</div>
                        </div>
                        <div class="track-controls">
                            <button class="track-btn">M</button>
                            <button class="track-btn">S</button>
                            <button class="track-btn">R</button>
                        </div>
                    </div>
                    <div class="track-timeline">
                        <div class="track-clips">
                            <div class="clip">Lead Vocal</div>
                            <div class="clip">Backing Vocals</div>
                        </div>
                    </div>
                </div>
                <div class="track">
                    <div class="track-header">
                        <div class="track-info">
                            <div class="track-color" style="background: #8b5cf6;"></div>
                            <div class="track-name">Ambient Pad</div>
                        </div>
                        <div class="track-controls">
                            <button class="track-btn">M</button>
                            <button class="track-btn">S</button>
                            <button class="track-btn">R</button>
                        </div>
                    </div>
                    <div class="track-timeline">
                        <div class="track-clips">
                            <div class="clip">Atmosphere</div>
                            <div class="clip">Texture</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Assistant View -->
        <section class="ai-assistant-panel section-content" id="ai-section">
            <div class="ai-header">
                <h3>ü§ñ AI Session Assistant</h3>
                <div class="ai-controls">
                    <button class="ai-analyze-btn" id="analyze-session">Analyze Session</button>
                </div>
            </div>
            
            <div class="ai-content">
                <div class="ai-tabs">
                    <button class="ai-tab active" data-tab="frequency">Frequency Analysis</button>
                    <button class="ai-tab" data-tab="suggestions">Suggestions</button>
                    <button class="ai-tab" data-tab="arrangement">Arrangement</button>
                </div>

                <!-- Frequency Analysis Tab -->
                <div class="tab-content active" id="frequency-tab">
                    <h4 style="margin-bottom: 1rem;">üéõÔ∏è Clashing Frequency Detection</h4>
                    <div class="frequency-meters">
                        <div class="freq-meter">
                            <div class="meter-label">Sub Bass (20-60Hz)</div>
                            <div class="meter-bar">
                                <div class="meter-fill green" style="height: 40%"></div>
                            </div>
                        </div>
                        <div class="freq-meter">
                            <div class="meter-label">Bass (60-250Hz)</div>
                            <div class="meter-bar">
                                <div class="meter-fill yellow" style="height: 75%"></div>
                            </div>
                        </div>
                        <div class="freq-meter">
                            <div class="meter-label">Mid (500-2kHz)</div>
                            <div class="meter-bar">
                                <div class="meter-fill red" style="height: 90%"></div>
                            </div>
                        </div>
                        <div class="freq-meter">
                            <div class="meter-label">High (2-6kHz)</div>
                            <div class="meter-bar">
                                <div class="meter-fill yellow" style="height: 60%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Suggestions Tab -->
                <div class="tab-content" id="suggestions-tab">
                    <h4 style="margin-bottom: 1rem;">üí° Intelligent Suggestions</h4>
                    <div class="suggestion-list">
                        <div class="suggestion-item">
                            <span class="suggestion-type">Drum Fill</span>
                            <span class="suggestion-desc">Add 1/4 note triplet fill before chorus</span>
                            <button class="apply-btn">Apply</button>
                        </div>
                        <div class="suggestion-item">
                            <span class="suggestion-type">Riser</span>
                            <span class="suggestion-desc">8-bar noise riser leading to drop</span>
                            <button class="apply-btn">Apply</button>
                        </div>
                        <div class="suggestion-item">
                            <span class="suggestion-type">EQ</span>
                            <span class="suggestion-desc">Subtle 2dB boost at 80Hz</span>
                            <button class="apply-btn">Apply</button>
                        </div>
                    </div>
                </div>

                <!-- Arrangement Tab -->
                <div class="tab-content" id="arrangement-tab">
                    <h4 style="margin-bottom: 1rem;">üéº Arrangement Analysis</h4>
                    <div style="color: var(--text-secondary);">
                        <p>Current Structure: Intro ‚Üí Verse ‚Üí Chorus ‚Üí Verse ‚Üí Chorus ‚Üí Bridge ‚Üí Chorus ‚Üí Outro</p>
                        <p style="margin-top: 1rem;">üí° Consider adding a pre-chorus before second verse for better flow.</p>
                        <p>üî• The chorus could benefit from an additional counter-melody.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mixer View -->
        <section class="mixer-view section-content" id="mixer-section">
            <h3 style="margin-bottom: 1rem;">üéöÔ∏è Mixer</h3>
            <div class="mixer-channels">
                <div class="channel">
                    <div class="channel-name">Drums</div>
                    <div class="vu-meter">
                        <div class="vu-meter-left" style="height: 60%;"></div>
                        <div class="vu-meter-right" style="height: 55%;"></div>
                    </div>
                    <div class="volume-fader">
                        <input type="range" class="fader" min="0" max="100" value="75">
                    </div>
                    <div class="channel-controls">
                        <button class="channel-btn">M</button>
                        <button class="channel-btn">S</button>
                        <button class="channel-btn">R</button>
                    </div>
                </div>
                <div class="channel">
                    <div class="channel-name">Bass</div>
                    <div class="vu-meter">
                        <div class="vu-meter-left" style="height: 70%;"></div>
                        <div class="vu-meter-right" style="height: 65%;"></div>
                    </div>
                    <div class="volume-fader">
                        <input type="range" class="fader" min="0" max="100" value="70">
                    </div>
                    <div class="channel-controls">
                        <button class="channel-btn">M</button>
                        <button class="channel-btn">S</button>
                        <button class="channel-btn">R</button>
                    </div>
                </div>
                <div class="channel">
                    <div class="channel-name">Synth Lead</div>
                    <div class="vu-meter">
                        <div class="vu-meter-left" style="height: 45%;"></div>
                        <div class="vu-meter-right" style="height: 40%;"></div>
                    </div>
                    <div class="volume-fader">
                        <input type="range" class="fader" min="0" max="100" value="65">
                    </div>
                    <div class="channel-controls">
                        <button class="channel-btn">M</button>
                        <button class="channel-btn">S</button>
                        <button class="channel-btn">R</button>
                    </div>
                </div>
                <div class="channel">
                    <div class="channel-name">Vocals</div>
                    <div class="vu-meter">
                        <div class="vu-meter-left" style="height: 80%;"></div>
                        <div class="vu-meter-right" style="height: 75%;"></div>
                    </div>
                    <div class="volume-fader">
                        <input type="range" class="fader" min="0" max="100" value="80">
                    </div>
                    <div class="channel-controls">
                        <button class="channel-btn">M</button>
                        <button class="channel-btn">S</button>
                        <button class="channel-btn">R</button>
                    </div>
                </div>
                <div class="channel">
                    <div class="channel-name">Ambient Pad</div>
                    <div class="vu-meter">
                        <div class="vu-meter-left" style="height: 30%;"></div>
                        <div class="vu-meter-right" style="height: 25%;"></div>
                    </div>
                    <div class="volume-fader">
                        <input type="range" class="fader" min="0" max="100" value="50">
                    </div>
                    <div class="channel-controls">
                        <button class="channel-btn">M</button>
                        <button class="channel-btn">S</button>
                        <button class="channel-btn">R</button>
                    </div>
                </div>
                <div class="channel">
                    <div class="channel-name">Master</div>
                    <div class="vu-meter">
                        <div class="vu-meter-left" style="height: 85%;"></div>
                        <div class="vu-meter-right" style="height: 82%;"></div>
                    </div>
                    <div class="volume-fader">
                        <input type="range" class="fader" min="0" max="100" value="100">
                    </div>
                    <div class="channel-controls">
                        <button class="channel-btn">M</button>
                        <button class="channel-btn">S</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Plugins View -->
        <section class="plugins-view section-content" id="plugins-section">
            <h3 style="margin-bottom: 1rem;">üîå Plugin Rack</h3>
            <div class="plugins-rack">
                <div class="plugin-slot">
                    <div class="plugin-header">
                        <div class="plugin-name">EQ</div>
                        <button class="plugin-toggle">ON</button>
                    </div>
                    <div class="plugin-controls">
                        <div class="control-group">
                            <span class="control-label">Low</span>
                            <input type="range" class="control-slider" min="-20" max="20" value="0">
                            <span class="control-value">0dB</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Mid</span>
                            <input type="range" class="control-slider" min="-20" max="20" value="0">
                            <span class="control-value">0dB</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">High</span>
                            <input type="range" class="control-slider" min="-20" max="20" value="0">
                            <span class="control-value">0dB</span>
                        </div>
                    </div>
                </div>
                <div class="plugin-slot">
                    <div class="plugin-header">
                        <div class="plugin-name">Compressor</div>
                        <button class="plugin-toggle">ON</button>
                    </div>
                    <div class="plugin-controls">
                        <div class="control-group">
                            <span class="control-label">Threshold</span>
                            <input type="range" class="control-slider" min="-60" max="0" value="-20">
                            <span class="control-value">-20dB</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Ratio</span>
                            <input type="range" class="control-slider" min="1" max="20" value="4">
                            <span class="control-value">4:1</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Attack</span>
                            <input type="range" class="control-slider" min="0" max="100" value="2">
                            <span class="control-value">2ms</span>
                        </div>
                    </div>
                </div>
                <div class="plugin-slot">
                    <div class="plugin-header">
                        <div class="plugin-name">Reverb</div>
                        <button class="plugin-toggle">ON</button>
                    </div>
                    <div class="plugin-controls">
                        <div class="control-group">
                            <span class="control-label">Room Size</span>
                            <input type="range" class="control-slider" min="0" max="100" value="30">
                            <span class="control-value">30%</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Damping</span>
                            <input type="range" class="control-slider" min="0" max="100" value="50">
                            <span class="control-value">50%</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Wet Mix</span>
                            <input type="range" class="control-slider" min="0" max="100" value="20">
                            <span class="control-value">20%</span>
                        </div>
                    </div>
                </div>
                <div class="plugin-slot">
                    <div class="plugin-header">
                        <div class="plugin-name">Limiter</div>
                        <button class="plugin-toggle">ON</button>
                    </div>
                    <div class="plugin-controls">
                        <div class="control-group">
                            <span class="control-label">Ceiling</span>
                            <input type="range" class="control-slider" min="-6" max="0" value="-1">
                            <span class="control-value">-1dB</span>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Release</span>
                            <input type="range" class="control-slider" min="1" max="100" value="10">
                            <span class="control-value">10ms</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Export View -->
        <section class="export-view section-content" id="export-section">
            <h3 style="margin-bottom: 1rem;">üì§ Export Project</h3>
            <div class="export-options">
                <div class="export-group">
                    <h4>Format</h4>
                    <div class="format-options">
                        <div class="format-option selected" data-format="wav">WAV</div>
                        <div class="format-option" data-format="mp3">MP3</div>
                        <div class="format-option" data-format="flac">FLAC</div>
                        <div class="format-option" data-format="ogg">OGG</div>
                    </div>
                </div>
                <div class="export-group">
                    <h4>Quality Settings</h4>
                    <div style="display: grid; gap: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 0.9rem; color: var(--text-secondary);">Sample Rate</span>
                            <input type="range" style="width: 150px; height: 4px; background: var(--bg-primary); border-radius: 2px; outline: none; -webkit-appearance: none;" min="44100" max="192000" value="44100">
                            <span style="font-size: 0.8rem; color: var(--text-primary); min-width: 50px; text-align: right;">44.1kHz</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 0.9rem; color: var(--text-secondary);">Bit Depth</span>
                            <input type="range" style="width: 150px; height: 4px; background: var(--bg-primary); border-radius: 2px; outline: none; -webkit-appearance: none;" min="16" max="32" value="24">
                            <span style="font-size: 0.8rem; color: var(--text-primary); min-width: 50px; text-align: right;">24-bit</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="export-actions">
                <button class="export-btn" id="export-start">üì§ Export</button>
                <button class="cancel-btn" id="export-cancel">Cancel</button>
            </div>
        </section>
    </div>

    <script>
        // Complete DAW JavaScript with Realistic Mixer
        class BeatForgeAI {
            constructor() {
                this.isPlaying = false;
                this.isRecording = false;
                this.isLooping = false;
                this.currentTime = 0;
                this.totalTime = 225; // 3:45 in seconds
                this.bpm = 120;
                this.vuAnimationInterval = null;
                
                this.initializeElements();
                this.hideLoadingScreen();
                this.initializeEventListeners();
                this.startAnimationLoop();
                console.log('BeatForge AI DAW initialized successfully!');
            }

            hideLoadingScreen() {
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loading-screen');
                    const dawInterface = document.getElementById('daw-interface');
                    
                    if (loadingScreen) {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                        }, 500);
                    }
                    
                    if (dawInterface) {
                        dawInterface.style.display = 'block';
                        setTimeout(() => {
                            dawInterface.style.opacity = '1';
                        }, 100);
                    }
                }, 2000);
            }

            initializeElements() {
                this.playBtn = document.getElementById('play-btn');
                this.stopBtn = document.getElementById('stop-btn');
                this.recordBtn = document.getElementById('record-btn');
                this.loopBtn = document.getElementById('loop-btn');
                this.rewindBtn = document.getElementById('rewind-btn');
                this.currentTimeDisplay = document.getElementById('current-time');
                this.totalTimeDisplay = document.getElementById('total-time');
                this.loadingScreen = document.getElementById('loading-screen');
                this.dawInterface = document.getElementById('daw-interface');
            }

            initializeEventListeners() {
                // Transport controls
                if (this.playBtn) this.playBtn.addEventListener('click', () => this.togglePlayback());
                if (this.stopBtn) this.stopBtn.addEventListener('click', () => this.stop());
                if (this.recordBtn) this.recordBtn.addEventListener('click', () => this.toggleRecording());
                if (this.loopBtn) this.loopBtn.addEventListener('click', () => this.toggleLoop());
                if (this.rewindBtn) this.rewindBtn.addEventListener('click', () => this.rewind());

                // Navigation
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.switchSection(e.target.dataset.section));
                });

                // AI Assistant
                document.getElementById('analyze-session')?.addEventListener('click', () => this.analyzeSession());

                // AI Tabs
                document.querySelectorAll('.ai-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => this.switchAITab(e.target.dataset.tab));
                });

                // Track controls
                document.querySelectorAll('.track-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.toggleTrackControl(e.target));
                });

                // Channel controls
                document.querySelectorAll('.channel-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.toggleChannelControl(e.target));
                });

                // Plugin toggles
                document.querySelectorAll('.plugin-toggle').forEach(btn => {
                    btn.addEventListener('click', (e) => this.togglePlugin(e.target));
                });

                // Format options
                document.querySelectorAll('.format-option').forEach(btn => {
                    btn.addEventListener('click', (e) => this.selectFormat(e.target));
                });

                // Export controls
                document.getElementById('export-start')?.addEventListener('click', () => this.startExport());
                document.getElementById('export-cancel')?.addEventListener('click', () => this.cancelExport());

                // Control sliders
                document.querySelectorAll('.control-slider, .fader').forEach(slider => {
                    slider.addEventListener('input', (e) => this.updateControlValue(e.target));
                });

                // BPM control
                const bpmInput = document.getElementById('bpm-input');
                if (bpmInput) {
                    bpmInput.addEventListener('change', (e) => {
                        this.bpm = parseInt(e.target.value);
                        console.log('BPM changed to:', this.bpm);
                    });
                }
            }

            togglePlayback() {
                if (this.isPlaying) {
                    this.pause();
                } else {
                    this.play();
                }
            }

            play() {
                this.isPlaying = true;
                if (this.playBtn) {
                    this.playBtn.innerHTML = '‚è∏Ô∏è';
                    this.playBtn.classList.add('playing');
                }
                this.startPlaybackTimer();
                this.startVUAnimation();
                console.log('Playback started');
            }

            pause() {
                this.isPlaying = false;
                if (this.playBtn) {
                    this.playBtn.innerHTML = '‚ñ∂Ô∏è';
                    this.playBtn.classList.remove('playing');
                }
                this.stopPlaybackTimer();
                this.stopVUAnimation();
                console.log('Playback paused');
            }

            stop() {
                this.isPlaying = false;
                this.currentTime = 0;
                if (this.playBtn) {
                    this.playBtn.innerHTML = '‚ñ∂Ô∏è';
                    this.playBtn.classList.remove('playing');
                }
                this.stopPlaybackTimer();
                this.stopVUAnimation();
                this.updateTimeDisplay();
                console.log('Playback stopped');
            }

            toggleRecording() {
                this.isRecording = !this.isRecording;
                if (this.recordBtn) {
                    if (this.isRecording) {
                        this.recordBtn.classList.add('recording');
                        console.log('Recording started');
                    } else {
                        this.recordBtn.classList.remove('recording');
                        console.log('Recording stopped');
                    }
                }
            }

            toggleLoop() {
                this.isLooping = !this.isLooping;
                if (this.loopBtn) {
                    if (this.isLooping) {
                        this.loopBtn.classList.add('active');
                    } else {
                        this.loopBtn.classList.remove('active');
                    }
                }
                console.log('Loop toggled:', this.isLooping);
            }

            rewind() {
                this.currentTime = 0;
                this.updateTimeDisplay();
                console.log('Rewound to start');
            }

            startPlaybackTimer() {
                this.playbackTimer = setInterval(() => {
                    if (this.isPlaying) {
                        this.currentTime += 0.1;
                        if (this.currentTime >= this.totalTime) {
                            if (this.isLooping) {
                                this.currentTime = 0;
                            } else {
                                this.stop();
                            }
                        }
                        this.updateTimeDisplay();
                    }
                }, 100);
            }

            stopPlaybackTimer() {
                if (this.playbackTimer) {
                    clearInterval(this.playbackTimer);
                    this.playbackTimer = null;
                }
            }

            updateTimeDisplay() {
                if (this.currentTimeDisplay) {
                    this.currentTimeDisplay.textContent = this.formatTime(this.currentTime);
                }
                if (this.totalTimeDisplay) {
                    this.totalTimeDisplay.textContent = this.formatTime(this.totalTime);
                }
            }

            formatTime(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                const secs = Math.floor(seconds % 60);
                const ms = Math.floor((seconds % 1) * 1000);
                
                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}.${ms.toString().padStart(3, '0')}`;
            }

            switchSection(sectionName) {
                console.log('Switching to section:', sectionName);
                
                // Update nav buttons
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-section="${sectionName}"]`)?.classList.add('active');
                
                // Hide all sections
                document.querySelectorAll('.section-content').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected section
                document.getElementById(`${sectionName}-section`)?.classList.add('active');
            }

            switchAITab(tabName) {
                // Update tab buttons
                document.querySelectorAll('.ai-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`)?.classList.add('active');
                
                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${tabName}-tab`)?.classList.add('active');
            }

            analyzeSession() {
                const analyzeBtn = document.getElementById('analyze-session');
                if (analyzeBtn) {
                    analyzeBtn.textContent = 'üîÑ Analyzing...';
                    analyzeBtn.disabled = true;
                    
                    setTimeout(() => {
                        analyzeBtn.textContent = 'üîç Analyze Session';
                        analyzeBtn.disabled = false;
                        this.showNotification('Session analysis complete! No frequency clashes detected.', 'success');
                    }, 2000);
                }
            }

            toggleTrackControl(button) {
                button.classList.toggle('active');
                const track = button.closest('.track');
                const trackName = track.querySelector('.track-name').textContent;
                const action = button.textContent;
                console.log(`${trackName} ${action} toggled`);
            }

            toggleChannelControl(button) {
                button.classList.toggle('active');
                const channel = button.closest('.channel');
                const channelName = channel.querySelector('.channel-name').textContent;
                const action = button.textContent;
                console.log(`${channelName} ${action} toggled`);
            }

            togglePlugin(button) {
                const isOn = button.textContent === 'ON';
                button.textContent = isOn ? 'OFF' : 'ON';
                button.classList.toggle('bypassed');
                const plugin = button.closest('.plugin-slot');
                const pluginName = plugin.querySelector('.plugin-name').textContent;
                console.log(`${pluginName} ${isOn ? 'bypassed' : 'enabled'}`);
            }

            selectFormat(button) {
                document.querySelectorAll('.format-option').forEach(btn => {
                    btn.classList.remove('selected');
                });
                button.classList.add('selected');
                console.log('Format selected:', button.dataset.format);
            }

            updateControlValue(slider) {
                const value = slider.value;
                const valueDisplay = slider.nextElementSibling;
                if (valueDisplay) {
                    if (slider.classList.contains('control-slider')) {
                        const label = slider.previousElementSibling.textContent;
                        if (label === 'Low' || label === 'Mid' || label === 'High') {
                            valueDisplay.textContent = `${value}dB`;
                        } else if (label === 'Threshold') {
                            valueDisplay.textContent = `${value}dB`;
                        } else if (label === 'Ratio') {
                            valueDisplay.textContent = `${value}:1`;
                        } else if (label === 'Attack' || label === 'Release') {
                            valueDisplay.textContent = `${value}ms`;
                        } else {
                            valueDisplay.textContent = `${value}%`;
                        }
                    }
                }
            }

            startVUAnimation() {
                // Simulate realistic audio levels for each channel
                this.vuAnimationInterval = setInterval(() => {
                    const channels = [
                        { name: 'Drums', baseLevel: 75, variation: 15 },
                        { name: 'Bass', baseLevel: 70, variation: 20 },
                        { name: 'Synth Lead', baseLevel: 45, variation: 25 },
                        { name: 'Vocals', baseLevel: 80, variation: 10 },
                        { name: 'Ambient Pad', baseLevel: 30, variation: 15 },
                        { name: 'Master', baseLevel: 85, variation: 8 }
                    ];
                    
                    channels.forEach((channel, index) => {
                        const leftMeter = document.querySelectorAll('.vu-meter-left')[index];
                        const rightMeter = document.querySelectorAll('.vu-meter-right')[index];
                        
                        if (leftMeter && rightMeter) {
                            // Create realistic audio level simulation
                            const time = Date.now() / 1000;
                            const beatPhase = (time * this.bpm / 60) % 1;
                            
                            // Different patterns for different channels
                            let leftLevel, rightLevel;
                            
                            switch(channel.name) {
                                case 'Drums':
                                    // Kick on beats 1 and 3, snare on 2 and 4
                                    leftLevel = beatPhase < 0.25 ? channel.baseLevel + channel.variation : 
                                              beatPhase < 0.5 ? channel.baseLevel : 
                                              channel.baseLevel - 10;
                                    rightLevel = leftLevel + (Math.random() - 0.5) * 5;
                                    break;
                                case 'Bass':
                                    // Follows kick pattern
                                    leftLevel = beatPhase < 0.5 ? channel.baseLevel + Math.sin(beatPhase * Math.PI * 4) * channel.variation : 
                                              channel.baseLevel - 5;
                                    rightLevel = leftLevel + (Math.random() - 0.5) * 3;
                                    break;
                                case 'Synth Lead':
                                    // Melodic variation
                                    leftLevel = channel.baseLevel + Math.sin(time * 2) * channel.variation + 
                                              Math.sin(time * 3.7) * 10;
                                    rightLevel = leftLevel + (Math.random() - 0.5) * 8;
                                    break;
                                case 'Vocals':
                                    // More consistent with occasional peaks
                                    leftLevel = channel.baseLevel + (beatPhase < 0.25 ? 15 : 0) + 
                                              (Math.random() - 0.5) * 5;
                                    rightLevel = leftLevel + (Math.random() - 0.5) * 3;
                                    break;
                                case 'Ambient Pad':
                                    // Slow, gentle movement
                                    leftLevel = channel.baseLevel + Math.sin(time * 0.5) * channel.variation;
                                    rightLevel = leftLevel + (Math.random() - 0.5) * 2;
                                    break;
                                case 'Master':
                                    // Combination of all channels with slight compression
                                    const allLevels = Array.from(document.querySelectorAll('.vu-meter-left')).slice(0, -1).map(m => parseFloat(m.style.height));
                                    const avgLevel = allLevels.reduce((a, b) => a + b, 0) / allLevels.length;
                                    leftLevel = Math.min(95, avgLevel * 1.1 + channel.variation * 0.3);
                                    rightLevel = leftLevel + (Math.random() - 0.5) * 2;
                                    break;
                                default:
                                    leftLevel = channel.baseLevel;
                                    rightLevel = channel.baseLevel;
                            }
                            
                            // Apply smoothing to avoid jarring changes
                            const currentLeft = parseFloat(leftMeter.style.height) || channel.baseLevel;
                            const currentRight = parseFloat(rightMeter.style.height) || channel.baseLevel;
                            
                            const smoothedLeft = currentLeft * 0.8 + leftLevel * 0.2;
                            const smoothedRight = currentRight * 0.8 + rightLevel * 0.2;
                            
                            // Ensure levels stay within bounds
                            const finalLeft = Math.max(5, Math.min(95, smoothedLeft));
                            const finalRight = Math.max(5, Math.min(95, smoothedRight));
                            
                            leftMeter.style.height = `${finalLeft}%`;
                            rightMeter.style.height = `${finalRight}%`;
                            
                            // Add clipping indicator if levels are too high
                            if (finalLeft > 90 || finalRight > 90) {
                                leftMeter.style.background = 'linear-gradient(to top, #ff4444, #ff6666, #ff8888)';
                                rightMeter.style.background = 'linear-gradient(to top, #ff4444, #ff6666, #ff8888)';
                            } else {
                                leftMeter.style.background = 'linear-gradient(to top, var(--accent-success), var(--accent-warning), var(--accent-danger))';
                                rightMeter.style.background = 'linear-gradient(to top, var(--accent-success), var(--accent-warning), var(--accent-danger))';
                            }
                        }
                    });
                }, 50); // Update 20 times per second for smooth animation
            }

            stopVUAnimation() {
                if (this.vuAnimationInterval) {
                    clearInterval(this.vuAnimationInterval);
                    this.vuAnimationInterval = null;
                }
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? 'var(--accent-success)' : type === 'error' ? 'var(--accent-danger)' : 'var(--accent-primary)'};
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    z-index: 10001;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '1';
                }, 100);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }

            startAnimationLoop() {
                console.log('Animation loop started');
            }
        }

        // Initialize DAW when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, initializing BeatForge AI DAW...');
            window.beatForgeAI = new BeatForgeAI();
        });

        // Fallback initialization if DOM is already loaded
        if (document.readyState === 'loading') {
            // DOM is still loading
        } else {
            console.log('DOM already loaded, initializing BeatForge AI DAW...');
            window.beatForgeAI = new BeatForgeAI();
        }
    </script>
</body>
</html>
